<% provide(:title, "旅行プランの編集") %>
<%= form_for(@trip) do |trip_f|%>
  <div class="whitebox">
    <div class="trip-picture">
      <%= image_tag @trip.picture.to_s, class: "img-responsive" %>
    </div>
    <span class="tripform-info">
      <%= trip_f.file_field :picture, accept: 'image/jpeg, image/gif, image/png' %>
    </span>
    <span class="tripform-info">
      <%= trip_f.label :name, '旅行名' %>
      <%= trip_f.text_field :name, class: 'form-control' %>
    </span>
    <span class="tripform-info">
      <%= trip_f.label :content, '旅行概要' %>
      <%= trip_f.text_area :content, class: 'form-control' %>
    </span>
    <%# noteフォーム %>
    <div class="notes-form">
      <p class="note-tit">旅行メモ</p>
      <%= trip_f.nested_fields_for :notes, wrapper_tag: :div do |n| %>
        <div class="each-note">
          <span class="noteform-info">
            <%= n.text_field :subject, class: 'form-control' %>
          </span>
          <span class="noteform-info">
            <%= n.text_area :content, class: 'form-control' %>
          </span>
          <%= n.remove_nested_fields_link 'Delete', class: 'btn btn-danger', role: 'button' %>
        </div>
      <% end %>
      <%= trip_f.add_nested_fields_link :notes, '追加', class: 'btn btn-primary', role: 'button' %>
    </div>
    <%# スケジュールフォーム %>
    <div class="schedules-form">
      <%= trip_f.nested_fields_for :schedules, wrapper_tag: :div do |s| %>
        <div class="each-schedule">
          <div class="row">
            <div class="col-md-3">
              <div class = 'form-group'>
                <%= s.time_field :time, class: 'form-control', placeholder: "時" %>
              </div>
            </div>
              <div class = 'form-group'>
                <%= s.select :action, [["出発", "出発"], ["観光", "観光"], ["食事", "食事"], ["宿泊", "宿泊"], ["その他", "その他"]] %>
              </div>
            <div class="col-md-9">
              <div class = 'form-group'>
                <%= s.text_field :place, class: 'form-control' %>
              </div>
            </div>
          </div>
          <div class="tripform-info">
            <%= s.label :memo, 'memo' %>
            <%= s.text_field :memo, class: 'form-control' %>
          </div>
          <%= s.remove_nested_fields_link 'Delete', class: 'btn btn-danger', role: 'button' %>
        </div>
      <% end %>
      <%= trip_f.add_nested_fields_link :schedules, '追加', class: 'btn btn-primary', role: 'button' %>
    </div>
    <%# スケジュールフォームここまで %>
    <%= trip_f.submit "更新する", class: 'btn btn-default' %>
  </div>
<% end %>